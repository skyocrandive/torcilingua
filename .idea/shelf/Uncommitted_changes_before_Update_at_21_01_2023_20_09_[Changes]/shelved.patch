Index: app/src/main/java/com/example/texttospeech/LivelloActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.texttospeech;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.speech.RecognitionListener;\r\nimport android.speech.RecognizerIntent;\r\nimport android.speech.SpeechRecognizer;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Locale;\r\n\r\npublic class LivelloActivity extends AppCompatActivity {\r\n    public static final Integer RecordAudioRequestCode = 1;\r\n    private SpeechRecognizer speechRecognizer;\r\n    private EditText editText;\r\n    private ImageView micButton;\r\n    private TextView sciogliText;\r\n    private Button homeButton;\r\n\r\n    String testoSciogli = \"Trentatré Trentini entrarono a Trento tutti e trentatré trotterellando\";\r\n\r\n    float precisione(String testo, String parlato){\r\n        String[] paroleTesto = testo.split(\" \");\r\n        String[] paroleParlato = parlato.split(\" \");\r\n        int corrette = 0;\r\n        int i = 0;\r\n        for (i = 0; i< paroleTesto.length && i<paroleParlato.length; i++){\r\n            if(paroleTesto[i]==paroleParlato[i]){\r\n                corrette++;\r\n            }\r\n        }\r\n        float dividendo = i < paroleTesto.length ? paroleTesto.length : paroleParlato.length;\r\n        return corrette/dividendo;\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(final Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.livello);\r\n        sciogliText = findViewById(R.id.scioglilingua);\r\n        sciogliText.setText(testoSciogli);\r\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED){\r\n            checkPermission();\r\n        }\r\n\r\n        editText = findViewById(R.id.text);\r\n        micButton = findViewById(R.id.button);\r\n        homeButton = findViewById(R.id.goBack);\r\n        speechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);\r\n\r\n        final Intent speechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n        speechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n        speechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.ITALY.toString()); //it sets language recognition to the language of the device\r\n\r\n        speechRecognizer.setRecognitionListener(new RecognitionListener() {\r\n\r\n            @Override\r\n            public void onReadyForSpeech(Bundle bundle) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onBeginningOfSpeech() {\r\n                editText.setText(\"\");\r\n                editText.setHint(\"Sto ascoltando...\");\r\n            }\r\n\r\n            @Override\r\n            public void onRmsChanged(float v) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onBufferReceived(byte[] bytes) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEndOfSpeech() {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(int i) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onResults(Bundle bundle) {\r\n                micButton.setImageResource(R.drawable.ic_mic_black_off);\r\n                ArrayList<String> data = bundle.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);\r\n                String res = data.get(0);\r\n                float accuracy = precisione(testoSciogli, res);\r\n                editText.setText(res);\r\n            }\r\n\r\n            @Override\r\n            public void onPartialResults(Bundle bundle) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEvent(int i, Bundle bundle) {\r\n\r\n            }\r\n\r\n        });\r\n\r\n        micButton.setOnTouchListener(new View.OnTouchListener() {\r\n            @Override\r\n            public boolean onTouch(View view, MotionEvent motionEvent) {\r\n                if (motionEvent.getAction() == MotionEvent.ACTION_UP){\r\n                    speechRecognizer.stopListening();\r\n                }\r\n                if (motionEvent.getAction() == MotionEvent.ACTION_DOWN){\r\n                    micButton.setImageResource(R.drawable.ic_mic_black_24dp);\r\n                    speechRecognizer.startListening(speechRecognizerIntent);\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\n        homeButton.setOnTouchListener(new View.OnTouchListener() {\r\n            @Override\r\n            public boolean onTouch(View view, MotionEvent motionEvent) {\r\n                Intent intent = new Intent(LivelloActivity.this,MainActivity.class);\r\n                startActivity(intent);\r\n                return false;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        speechRecognizer.destroy();\r\n    }\r\n\r\n    private void checkPermission() {\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n            ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.RECORD_AUDIO},RecordAudioRequestCode);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == RecordAudioRequestCode && grantResults.length > 0 ){\r\n            if(grantResults[0] == PackageManager.PERMISSION_GRANTED)\r\n                Toast.makeText(this,\"Permission Granted\",Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/texttospeech/LivelloActivity.java b/app/src/main/java/com/example/texttospeech/LivelloActivity.java
--- a/app/src/main/java/com/example/texttospeech/LivelloActivity.java	(revision d466e9c018c4aa863adff1696a70a1a4f9025357)
+++ b/app/src/main/java/com/example/texttospeech/LivelloActivity.java	(date 1674327966107)
@@ -40,7 +40,7 @@
         int corrette = 0;
         int i = 0;
         for (i = 0; i< paroleTesto.length && i<paroleParlato.length; i++){
-            if(paroleTesto[i]==paroleParlato[i]){
+            if(paroleTesto[i].equalsIgnoreCase(paroleParlato[i])){
                 corrette++;
             }
         }
