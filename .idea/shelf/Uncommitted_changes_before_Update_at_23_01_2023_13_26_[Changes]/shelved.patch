Index: app/src/main/java/com/example/texttospeech/LivelloActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.texttospeech;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.speech.RecognitionListener;\r\nimport android.speech.RecognizerIntent;\r\nimport android.speech.SpeechRecognizer;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.google.android.material.chip.Chip;\r\nimport com.google.android.material.progressindicator.CircularProgressIndicator;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Locale;\r\n\r\npublic class LivelloActivity extends AppCompatActivity {\r\n    public static final Integer RecordAudioRequestCode = 1;\r\n    private SpeechRecognizer speechRecognizer;\r\n    private TextView parlatoText;\r\n    private TextView sciogliText;\r\n    private Button homeButton;\r\n    private ImageView micButton;\r\n    private Chip nextButton;\r\n    private TextView accuracyText;\r\n    private CircularProgressIndicator ratio;\r\n    private int totAcc = 0;\r\n\r\n\r\n    String testoSciogli = \"Trentatré Trentini entrarono a Trento tutti e trentatré trotterellando\";\r\n\r\n\r\n    int precisione(String testo, String parlato){\r\n        String[] paroleTesto = testo.split(\" \");\r\n        String[] paroleParlato = parlato.split(\" \");\r\n        int corrette = 0;\r\n        int i = 0;\r\n        for (i = 0; i< paroleTesto.length && i<paroleParlato.length; i++){\r\n            if(paroleTesto[i].equalsIgnoreCase(paroleParlato[i])){\r\n                corrette++;\r\n            }\r\n        }\r\n        float dividendo = i < paroleTesto.length ? paroleTesto.length : paroleParlato.length;\r\n        return (int) (100*corrette/dividendo);\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(final Bundle savedInstanceState) {\r\n        System.out.println(\"ciao mondo!!!!\");\r\n        System.out.println(\"avvio il livello n. \"+getIntent().getIntExtra(\"livello\",1));\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.livello);\r\n        sciogliText = findViewById(R.id.scioglilingua);\r\n        sciogliText.setText(testoSciogli);\r\n        int livello = getIntent().getIntExtra(\"livello\", 1);\r\n\r\n\r\n        parlatoText = findViewById(R.id.parlato);\r\n        micButton = findViewById(R.id.mic);\r\n        homeButton = findViewById(R.id.goHome);\r\n        nextButton = findViewById(R.id.nextBut);\r\n        accuracyText = findViewById(R.id.accuracyText);\r\n        ratio = findViewById(R.id.accuracy);\r\n        speechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);\r\n\r\n\r\n        final Intent speechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n        speechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n        speechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.ITALY.toString()); //it sets language recognition to the language of the device\r\n\r\n        speechRecognizer.setRecognitionListener(new RecognitionListener() {\r\n\r\n            @Override\r\n            public void onReadyForSpeech(Bundle bundle) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onBeginningOfSpeech() {\r\n                micButton.setImageResource(R.mipmap.mic_green);\r\n                parlatoText.setText(\"\");\r\n                parlatoText.setHint(\"Sto ascoltando...\");\r\n            }\r\n\r\n            @Override\r\n            public void onRmsChanged(float v) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onBufferReceived(byte[] bytes) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEndOfSpeech() {\r\n                micButton.setImageResource(R.mipmap.mic_def);\r\n            }\r\n\r\n            @Override\r\n            public void onError(int i) {\r\n                parlatoText.setHint(\"riprova\");\r\n            }\r\n\r\n            @Override\r\n            public void onResults(Bundle bundle) {\r\n\r\n                micButton.setImageResource(R.mipmap.mic_def);\r\n                ArrayList<String> data = bundle.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);\r\n                String res = data.get(0);\r\n                int accuracy = precisione(testoSciogli, res);\r\n                totAcc =accuracy;\r\n                parlatoText.setText(res);\r\n                accuracyText.setText(accuracy+\"%\");\r\n                ratio.setProgress(accuracy);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onPartialResults(Bundle bundle) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEvent(int i, Bundle bundle) {\r\n\r\n            }\r\n\r\n        });\r\n\r\n        micButton.setOnTouchListener(new View.OnTouchListener() {\r\n            @Override\r\n            public boolean onTouch(View view, MotionEvent motionEvent) {\r\n                if (motionEvent.getAction() == MotionEvent.ACTION_UP){\r\n                    speechRecognizer.stopListening();\r\n                }\r\n                if (motionEvent.getAction() == MotionEvent.ACTION_DOWN){\r\n                    speechRecognizer.startListening(speechRecognizerIntent);\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\n        homeButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(LivelloActivity.this, MainActivity.class);\r\n                intent.putExtra(\"livello\",livello);\r\n                intent.putExtra(\"totAcc\", totAcc);\r\n                setResult(RESULT_OK, intent);\r\n                finish();\r\n                //startActivity(intent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        speechRecognizer.destroy();\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/texttospeech/LivelloActivity.java b/app/src/main/java/com/example/texttospeech/LivelloActivity.java
--- a/app/src/main/java/com/example/texttospeech/LivelloActivity.java	(revision ddd4318f9814e9ba63131fb308cbfc8a13ca6581)
+++ b/app/src/main/java/com/example/texttospeech/LivelloActivity.java	(date 1674475996371)
@@ -71,7 +71,6 @@
         sciogliText.setText(testoSciogli);
         int livello = getIntent().getIntExtra("livello", 1);
 
-
         parlatoText = findViewById(R.id.parlato);
         micButton = findViewById(R.id.mic);
         homeButton = findViewById(R.id.goHome);
